#!/bin/bash

# First transaction input has a matching UTXO but second does not

$GLACIERSCRIPT --regtest=$1 create-withdrawal-data << INPUT 2>&1
y
y
y
y
y
y
2N93du8YobdgsHyu3qgBvSyhGUT52utMNeA
522103d14ddcfb6817f5579695bbb3eb3e185887bf2942b031e6f716343b8fe7e9e8e221028fcd46f8614b2cbf318096968242a1e22bcfb6d8f2b6dc939c8c27c347b2937b210315acb550120f4cdcb460d5c49080ab508ca4ccd8dedecac22feeac8cd017d4c121022b063ee2f22f9e1982c140fe778672c683111a796dcccdbd47bb65e3d608a98354ae
myP4xdJNwAW9iMakvCjnozg814ewgn8apd
2
0200000001bd90557a6f6c4e65fc50f9a387a5dbfff34d40e4b1c19c0f8ff02fa1b62778a0010000006a47304402204af4271c71249d133388341f2b62a379d21bf3d63eb30a8d98616880e580d7ca02206ee73d8b18790825dfbba644f87899653c48557916d083413162a15db5bd534c012102ba96d14990275cb9d53776c4721ae6e6673da67fafa148e09915592ad8eca120ffffffff02d3f55b05000000001976a91480c530a9ff28421e372ab654bd3657d1db33b84f88ac809698000000000017a914ad50fb2489353008e75b0193011ff1f4b76f798c8700000000
0200000001cbc99d3b9e5826196ce5ba150b11044847dc6d13a43e505a678c3ba9491c671a010000006a4730440220748fd3f972ea2581d3db91aca0fe2ce5e87763812e991b025615f09f859102e6022027525887f7d34b7d37b505e4d4964e4981b0130cd2c2390f6ac5ea518e19e3a3012103d614e2e6842ba1d9ab6b8e53d17f0fb9b0b1b39e3dc8f8ccc050d8d61864eb3cffffffff02300cf505000000001976a914e8bf77b8b6f5f6051e2043c950dc8c5a44c2a39c88ac50c300000000000017a914164187e1ce60d75723e00e56dbc47d0389724f688700000000
INPUT

retVal=$?
if [ $retVal -eq 0 ]; then
    echo "Error: expected glacierscript.py to fail"
    exit 1
fi
