#!/bin/bash

# First transaction input has a matching UTXO but second does not

$GLACIERSCRIPT --regtest=$1 create-withdrawal-data << INPUT 2>&1
y
y
y
y
y
y
2N93du8YobdgsHyu3qgBvSyhGUT52utMNeA
522103d14ddcfb6817f5579695bbb3eb3e185887bf2942b031e6f716343b8fe7e9e8e221028fcd46f8614b2cbf318096968242a1e22bcfb6d8f2b6dc939c8c27c347b2937b210315acb550120f4cdcb460d5c49080ab508ca4ccd8dedecac22feeac8cd017d4c121022b063ee2f22f9e1982c140fe778672c683111a796dcccdbd47bb65e3d608a98354ae
myP4xdJNwAW9iMakvCjnozg814ewgn8apd
2
0200000001370314a7f557d9b968635dd67fed87c3723976357b76a7bf9c6284beb623b2c2010000006a47304402203cb6278034d0f8bc0df424971842f23537bd4dd8af04196d1acdb17c9f17bc01022077dc42021d897a7723d9bf68e61421a4d9bd55522f4a593b30f839e9432e4090012102ba96d14990275cb9d53776c4721ae6e6673da67fafa148e09915592ad8eca120ffffffff02d3f55b05000000001976a91480c530a9ff28421e372ab654bd3657d1db33b84f88ac809698000000000017a914ad50fb2489353008e75b0193011ff1f4b76f798c8700000000
02000000016f62c2557f8e1549ccc34dee898b5e8ae5c4dec775998a2a73a3d38836267cbb010000006a473044022064a3e4fdbb6898a39d5705156512c1a8c5672e86076787b3c157979df3f9e736022034c47a1ae60ba9bb84d1c51015b38b5eaa75c504f794e89d272a8be997100851012103d614e2e6842ba1d9ab6b8e53d17f0fb9b0b1b39e3dc8f8ccc050d8d61864eb3cffffffff02300cf505000000001976a914e8bf77b8b6f5f6051e2043c950dc8c5a44c2a39c88ac50c300000000000017a914164187e1ce60d75723e00e56dbc47d0389724f688700000000
INPUT

retVal=$?
if [ $retVal -eq 0 ]; then
    echo "Error: expected glacierscript.py to fail"
    exit 1
fi
