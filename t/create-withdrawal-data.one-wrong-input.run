#!/bin/bash

# First transaction input has a matching UTXO but second does not

$GLACIERSCRIPT --regtest=$1 create-withdrawal-data << INPUT 2>&1
y
y
y
y
y
y
2N93du8YobdgsHyu3qgBvSyhGUT52utMNeA
522103d14ddcfb6817f5579695bbb3eb3e185887bf2942b031e6f716343b8fe7e9e8e221028fcd46f8614b2cbf318096968242a1e22bcfb6d8f2b6dc939c8c27c347b2937b210315acb550120f4cdcb460d5c49080ab508ca4ccd8dedecac22feeac8cd017d4c121022b063ee2f22f9e1982c140fe778672c683111a796dcccdbd47bb65e3d608a98354ae
myP4xdJNwAW9iMakvCjnozg814ewgn8apd
2
020000000150e96f83f393bd57fb50601ec3e4f2721910a9a90d9ecd32c594c72142087e2d010000006a47304402207e15e4228575b3acee2d0ccc40bb502868146533060710dd0c8e755df198e2cf02203768ba3bd24c814d8641406dea3e5731a92cf7699a45dad71e4d7b79b4768b17012102a15222fffbbf6a1a7284abfb62265563fab0658935456f7f6a40b33a203bf240ffffffff02d3f55b05000000001976a914fa7bba61512807e66997007e3a57658da013670c88ac809698000000000017a914ad50fb2489353008e75b0193011ff1f4b76f798c8700000000
02000000011bfe9e1c9b10bbabfb70e900b9bf351384bdfb599b6eb9bfab8896eaea8d75a6010000006a47304402201eb813adf8100bb54dc65e13256a7e11bfeb7a25d17fe92b7e5cef0dcda2ee2a0220161507d4c0c845c4c344e777bab9a2622148eb2f5e35ce5015b3b209c806336f012102797de59a113dbf929f6d598e03b7d4781916ed72a3c9e13780c9012faad51811ffffffff02300cf505000000001976a914c41eca2d5c2421d054c1f1996c0113ce4333effa88ac50c300000000000017a914f86cc5d9c001f9dba0fbb57a76d45a817fcaef6a8700000000
INPUT

retVal=$?
if [ $retVal -eq 0 ]; then
    echo "Error: expected glacierscript.py to fail"
    exit 1
fi
