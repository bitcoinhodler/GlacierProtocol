#!/bin/bash
set -e

# Test withdrawing from transaction that also has a taproot output.
# We send our withdrawal to a taproot output too.

$GLACIERSCRIPT --testnet=$1 create-withdrawal-data << INPUT 2>&1
y
y
y
y
y
y
tb1qvhyx836sxvwvq0hmfkk2y9l8jfw0lpl4a89fjf6kgg6turtz0r5q8hz22g
522103d14ddcfb6817f5579695bbb3eb3e185887bf2942b031e6f716343b8fe7e9e8e221028fcd46f8614b2cbf318096968242a1e22bcfb6d8f2b6dc939c8c27c347b2937b210315acb550120f4cdcb460d5c49080ab508ca4ccd8dedecac22feeac8cd017d4c121022b063ee2f22f9e1982c140fe778672c683111a796dcccdbd47bb65e3d608a98354ae
tb1pjqgxn78qpxak0gnmguz5z5xxq2rmpt64zxajznavl6lqj3g3fh6qj4hsxn
1
02000000000101432d55803a4295ed6af9021f21fef8c6e1774f50d5db1b8fcbe380ef12e7a20e0100000000fdffffff02f0270000000000002251201662b0217bba4013e02d7ff9339ac1996cf795a40bb5722ee57d844127e60fe3102700000000000022002065c863c750331cc03efb4daca217e7925cff87f5e9ca9927564234be0d6278e802473044022075d3bd6b3ed03434ccd08e3f9317ccac429f4a457e38b06b11cee7a0f306355b022071651c76784e76cd9b6762946156deadc5a4a2c726df5db5a3693b852255bfd70121031c7c09fc11765146a35a0bf6861f5e630cf231f4640e46d80b25f5562a345bd000000000
2
cNYaH3onqrdMffpznhMMmrHn34fuTU59w5j8LM3H42VPcUsLeXy5
cRoydfinDRzzRQJp5niqJWukSYTfPJQM6ytqGN6nzonaz1mafgwD
1
y

y
INPUT


# Cleanup cruft
rm transaction.png
