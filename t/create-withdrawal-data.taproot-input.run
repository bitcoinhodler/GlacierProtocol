#!/bin/bash
set -e

# Test withdrawing from transaction that also has a taproot output.
# We send our withdrawal to a taproot output too.

$GLACIERSCRIPT --regtest=$1 create-withdrawal-data << INPUT 2>&1
y
y
y
y
y
y
bcrt1qvhyx836sxvwvq0hmfkk2y9l8jfw0lpl4a89fjf6kgg6turtz0r5q2wgvlj
522103d14ddcfb6817f5579695bbb3eb3e185887bf2942b031e6f716343b8fe7e9e8e221028fcd46f8614b2cbf318096968242a1e22bcfb6d8f2b6dc939c8c27c347b2937b210315acb550120f4cdcb460d5c49080ab508ca4ccd8dedecac22feeac8cd017d4c121022b063ee2f22f9e1982c140fe778672c683111a796dcccdbd47bb65e3d608a98354ae
bcrt1pjqgxn78qpxak0gnmguz5z5xxq2rmpt64zxajznavl6lqj3g3fh6qlvaknf
1
02000000000101539418c51da77dc915c3ac754bff8e07ef3ecb51a948d85a48ad78812593b5180100000000ffffffff02f02700000000000022512045d08cf3e5df60b572d9c50b5f1ee98215a54871ff72c41cc1236eb61ede2d91102700000000000022002065c863c750331cc03efb4daca217e7925cff87f5e9ca9927564234be0d6278e802473044022032d02752232fe847f0af9f59ef085776713d295dd6268bb3d8564416931e68a4022041c9cca86ac3520bf5490aa8b3585d71681fbd4af5ee8feb912c713c2de44dec012102ed2bbd2685158c2b5d45378012e0e0d6dceeb8e22b0cafc8135bfa9ecb31ffe700000000
2
cNYaH3onqrdMffpznhMMmrHn34fuTU59w5j8LM3H42VPcUsLeXy5
cRoydfinDRzzRQJp5niqJWukSYTfPJQM6ytqGN6nzonaz1mafgwD
1
y

y
INPUT


# Cleanup cruft
rm transaction.png
