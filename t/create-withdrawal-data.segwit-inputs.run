#!/bin/bash
set -e

# Test withdrawing from transactions that were created by SegWit wallets.
# I have four transactions to try:
# 1. Electrum p2wpkh-in-p2sh with change
# 2. Electrum native p2wpkh with change
# 3. Electrum p2wpkh-in-p2sh with no change
# 4. Electrum native p2wpkh with no change


$GLACIERSCRIPT --regtest=$1 create-withdrawal-data << INPUT 2>&1
y
y
y
y
y
y
2NAVkgszAvjZZwWpHpbCaxSaNqCCXPD8Bts
522103d14ddcfb6817f5579695bbb3eb3e185887bf2942b031e6f716343b8fe7e9e8e221028fcd46f8614b2cbf318096968242a1e22bcfb6d8f2b6dc939c8c27c347b2937b210315acb550120f4cdcb460d5c49080ab508ca4ccd8dedecac22feeac8cd017d4c121022b063ee2f22f9e1982c140fe778672c683111a796dcccdbd47bb65e3d608a98354ae
2N5PvoFj6adLPcqHAD24MxEZxvdQMGBLXow
4
020000000001013e9ac15371a200ac2abaab6fd2cfd1933217d22d2f039bb355e3d0fbab8d61170100000017160014f2e8500abe9631777a16cc1ed7a1443826f26931ffffffff02107e88020000000017a91413b828c9e33394691a667bf3ce461d9f923a20f287a07f88020000000017a914bd3996bb9a6c401da7e65d4dbb3a9b978cd045ec87024730440220171c173dd33a9a8094c529b4994e829319da2aeb8464bd0f62bddd6c0ba9862d02205ac8b4f48d5f83064d2c2103a0279ffd821dc18e820df526c83f30c71e865eaf012103d998944b6ddffc204182ff2b9f44eb378ee829cb5977f8219002dc27eb00bfb700000000
020000000001011e4e29f207a39698e1883d7e5a002a18745593de2ec8789902245c5cb743ff3c0100000000ffffffff02084b87020000000017a914bd3996bb9a6c401da7e65d4dbb3a9b978cd045ec8770b389020000000016001462d27332f38c82f272ad390a32df8b8c2b1a6100024730440220432ab23afedd78c4eebec65fc7c8b2b838407722dad56da999c0d7a6427dac4302207ca441fd309847d24ed0741bc118782ecff1c10831f1c1e43e7898cd6ffda93b012102650d89b98b7b0228c70b4b584b8851765fce7d17231c3febb2efa0404cd3f04e00000000
020000000001017bedb551605ff1da4af3e2c30b7a41ed03c97dbe8e81edc4841e306a75d7be7301000000171600141a457253a74fdf1bd6d5309f8a2c8d37c3109f28ffffffff01887d88020000000017a914bd3996bb9a6c401da7e65d4dbb3a9b978cd045ec8702473044022042c2537bd51aa08c54a7e7e28e3c6b2f205fb380874a37533fc0e9066f8e82f102203cb6bb27c24b85b0ffe529bacc634364cc2fa6bf5ad4ab15f8171dca8873551b0121030cf09d67431dee14a9279d9c57e17ed7580e1898444a5594667133786a10b90b00000000
02000000000101ebdafcbe7df917c6352b781464e18dfcf1c68a0717edea0ca9469f20ff175f0e0100000000ffffffff01ffb289020000000017a914bd3996bb9a6c401da7e65d4dbb3a9b978cd045ec8702473044022039f85ca3a35d4cd38436690e51db9723f6a2d6689bb06c7f2bf3916448f321eb022003c00834ea21790dea8e9cf35918757823e345d2530cccfbea6cc9e7778d9a03012102e6df1c0ca070c76b0a481ab58475371c68e8d4e24c11cfae421bf040099fdad800000000
2
cQCrT9Ncs9729ao7jbmAWrD9z7tF64s2yKzmD6nkiLAi9sXVZWAn
cP65UeSDZPiTLB6CBwasWv9oJYEjRgQXhswfwcT9HscEKDcEbgy4
1
y

y
INPUT
